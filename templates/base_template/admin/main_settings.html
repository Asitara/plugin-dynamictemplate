<script type="text/javascript">

var id = {KEY};

function delete_row(obj){
	$(obj).parent().parent().remove();
}

function add_row(){
	var new_row = $('#reference_row').html()+"";
	new_row = new_row.replace(/KEY/g, id);
	id = id + 1;
	$("#dynamictemplate_form_table").find('tbody').append('<tr>'+new_row+'</tr>');
}

</script>

<!-- IF S_NORMAL_HEADER -->
<div class="breadcrumb-container">
	<ul class="breamcrumb">
		<li><a href="{EQDKP_CONTROLLER_PATH}{SID}" title="{L_home}"><i class="fa fa-home"></i></a></li>
		<li><a href="{EQDKP_ROOT_PATH}admin/{SID}">{L_menu_admin_panel}</a>
		<li class="current"><a>{L_dynamictemplate}: {L_dynamictemplate_main_settings}</a></li>
	</ul>
	<div class="clear"></div>
</div>
<!-- ENDIF -->
<div class="contentHeader">
	<h1 class="contentTitle">{L_dynamictemplate_main_settings}</h1>
</div>

<div class="infobox infobox-large infobox-blue clearfix">
	<i class="fa fa-info-circle fa-2x pull-left"></i> {L_dynamictemplate_customcheck_info}
</div>
<br />

<form name="dynamictemplate_settings" action="{ACTION}" method="post">
	<table width="100%" border="0" cellspacing="1" cellpadding="2" id="dynamictemplate_form_table" class="colorswitch">
		<thead>
		<tr class="not-sortable">
			<th width="10px"></th>
			<th width="10px"></th>
			<th width="20px;"></th>
			<th style="min-width: 30px;width: 30px;">{L_dynamictemplate_active}</th>
			<th style="min-width: 200px;width: 200px;">{L_dynamictemplate_name}</th>
			<th>{L_dynamictemplate_value}</th>
		</tr>
		</thead>
		<tbody>
		<!-- BEGIN field_row -->
		<tr>
			<td><span class="ui-icon ui-icon-arrowthick-2-n-s" title="{L_dragndrop}"></span></td>
			<td width="10px">#{field_row.KEY}</td>
			<td align="center"><input type="hidden" name="field[{field_row.KEY}][id]" value="{field_row.KEY}" class="dynamictemplate_id"/><i class="fa fa-trash-o fa-lg" title="{L_dynamictemplate_delete_field}"  onclick="delete_row(this);"></i></td>
			
			<td><input type="checkbox" name="field[{field_row.KEY}][active]" value="1" {field_row.ACTIVE}/></td>
			<td><input type="text" name="field[{field_row.KEY}][name]" value="{field_row.NAME}" class="input dynamictemplate_name" /></td>
			<td><textarea name="field[{field_row.KEY}][value]" rows="4" class="input" style="height:{field_row.OPTIONS_HEIGHT}px;width: 97%;">{field_row.VALUE}</textarea></td>
		</tr>
		<!-- END field_row -->
		</tbody>
	</table>
	<div class="contentFooter" style="height:40px">
		<button type="submit" name="save"><i class="fa fa-check"></i>{L_save}</button>
		<button type="button" onclick="add_row();"><i class="fa fa-plus"></i>{L_dynamictemplate_add_field}</button>
	</div>
	
{CSRF_TOKEN}
</form>


<table style="display:none;">
	<tr id="reference_row">
		<td><span class="ui-icon ui-icon-arrowthick-2-n-s" title="{L_dragndrop}"></span></td>
		<td width="10px">#KEY</td>
		<td align="center"><input type="hidden" name="field[KEY][id]" value="KEY" class="dynamictemplate_id" /><i class="fa fa-trash-o fa-lg" title="{L_delte}" onclick="delete_row(this);"></i></td>
		<td><input type="checkbox" name="field[KEY][active]" value="1" /></td>
		<td><input type="text" name="field[KEY][name]" value="" class="input dynamictemplate_name" style="width: 90%" /></td>
		<td><textarea name="field[KEY][value]" rows="4" class="input" style="height:{field_row.OPTIONS_HEIGHT}px;width: 97%;">{field_row.VALUE}</textarea></td>
	</tr>
</table>
